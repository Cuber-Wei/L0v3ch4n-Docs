import{_ as a}from"./fastfetch-XmCxEZmC.js";import{_ as e,c as h,a as n,d as t,r as l,o as d}from"./app-mXHhDMsf.js";const r="/images/notes/OS/ArchLinux/setup/lsblk.png",k={};function p(c,s){const i=l("VPVideoEmbed");return d(),h("div",null,[s[0]||(s[0]=n('<h2 id="_0xff-前言" tabindex="-1"><a class="header-anchor" href="#_0xff-前言"><span>0xFF 前言</span></a></h2><p>前前后后两天多，ArchLinux和一些常用软件的安装也算是基本完成了。</p><p><img src="'+a+'" alt="fastfetch"></p><p>回想这次的<s>挑战</s>安装过程，感觉ArchLinux的安装过程还是相对比较顺利的 （毕竟网上教程有好多， 跟着<a href="https://wiki.archlinuxcn.org/wiki/%E9%A6%96%E9%A1%B5" target="_blank" rel="noopener noreferrer">Wiki</a>很多问题也能找到解决方案 ）。</p><p>在这边浅浅记录一下本次安装过程中碰到的亿些小问题，也方便今后巩固和回顾。</p><h2 id="_0x00-安装前的准备" tabindex="-1"><a class="header-anchor" href="#_0x00-安装前的准备"><span>0x00 安装前的准备</span></a></h2><h3 id="物料准备" tabindex="-1"><a class="header-anchor" href="#物料准备"><span>物料准备</span></a></h3><ul><li>一台电脑（不然系统装哪里去）</li><li>一块U盘（8G就足够了）</li><li>一根网线（能连无线网就不用这个了）</li></ul><h3 id="制作启动盘" tabindex="-1"><a class="header-anchor" href="#制作启动盘"><span>制作启动盘</span></a></h3><ol><li>下载<a href="https://archlinux.org/download/" target="_blank" rel="noopener noreferrer">ArchLinux镜像</a></li><li>使用<a href="https://rufus.ie/zh/" target="_blank" rel="noopener noreferrer">Rufus</a>烧录镜像到U盘</li><li>重启电脑，进入BIOS，将U盘设置为第一启动项，然后保存并重启</li><li>选择Arch Install选项，等待Live环境启动完成</li></ol><h3 id="live环境中的安装前准备" tabindex="-1"><a class="header-anchor" href="#live环境中的安装前准备"><span>Live环境中的安装前准备</span></a></h3><p>现在我们就在Live环境中了，我们需要在安装之前进行一些准备操作。</p><ol><li><p>关闭reflector服务 目前ArchLinux中的reflector服务会自动更新镜像源，导致我们无法手动选择镜像源，因此我们需要先关闭reflector服务。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reflector.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>编辑<code>pacman</code>镜像源配置文件，将需要的镜像源放于文件头部</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/pacman.d/mirrorlist</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>硬盘分区、格式化 这里我使用的是<code>fdisk</code> 进行分区，具体分区操作可以参考<a href="https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97#%E5%BB%BA%E7%AB%8B%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA" target="_blank" rel="noopener noreferrer">ArchLinux Wiki</a>。</p><p>我的分区表是这样子：</p><table><thead><tr><th>已安装系统上的挂载点</th><th>分区大小</th><th>格式化类型</th><th>备注</th></tr></thead><tbody><tr><td>/boot</td><td>1G</td><td>fat32</td><td>启动引导分区，不小于512M</td></tr><tr><td>[SWAP]</td><td>64G</td><td>Linux swap</td><td>Linux交换分区，按内存大小确定，不小于4G</td></tr><tr><td>/</td><td>剩下的空间</td><td>ext4（也可以用btrfs，快照的大小会比较小）</td><td>根目录，设备剩余空间，至少23-32GiB</td></tr></tbody></table><p><img src="'+r+`" alt="lsblk"></p></li><li><p>挂载分区 使用<code>mount</code>命令将分区挂载到对应的挂载点。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sda1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 挂载根分区</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt/boot</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 创建boot目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sda2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt/boot</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 挂载boot分区</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>连接网络 这里我用的是无线连接，使用<code>iwctl</code>命令连接到无线网络。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">iwctl</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 进入iwctl命令行</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">device</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 列出所有无线网卡设备</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">station</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">interfac</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scan</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 扫描无线网络</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">station</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">interfac</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get-networks</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 获取无线网络列表</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">station</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">interfac</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">e</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> connect</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssi</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">d</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">passwor</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">d</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 连接到无线网络</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exit</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 退出iwctl命令行</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_0x01-正式安装" tabindex="-1"><a class="header-anchor" href="#_0x01-正式安装"><span>0x01 正式安装</span></a></h2><p>经过以上挣扎，我们终于可以开始安装系统了。</p><h3 id="安装必需的软件包和编辑器" tabindex="-1"><a class="header-anchor" href="#安装必需的软件包和编辑器"><span>安装必需的软件包和编辑器</span></a></h3><p>我比较喜欢<code>vim</code>来在命令行中编辑文件，当然你也可以选择<code>nano</code>,<code>vi</code>等用得习惯的编辑器。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pacstrap</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> base</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> linux-firmware</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> intel-ucode</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编辑器不要忘了装，新系统中是没有编辑器的</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># amd CPU用户需要下载amd-ucode</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_0x02-系统配置" tabindex="-1"><a class="header-anchor" href="#_0x02-系统配置"><span>0x02 系统配置</span></a></h2><h3 id="生成fstab文件" tabindex="-1"><a class="header-anchor" href="#生成fstab文件"><span>生成<code>fstab</code>文件</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">genfstab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -U</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt/etc/fstab</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt/etc/fstab</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 检查写入是否成功</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="切换到新系统环境" tabindex="-1"><a class="header-anchor" href="#切换到新系统环境"><span>切换到新系统环境</span></a></h3><p>使用<code>chroot</code>命令切换到新系统环境。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">arch-chroot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="安装辅助软件包" tabindex="-1"><a class="header-anchor" href="#安装辅助软件包"><span>安装辅助软件包</span></a></h3><p>这时候也可以安装一些辅助软件包，这能帮助你更方便地使用、配置系统。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pacman</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> networkmanager</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> xorg</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> xorg-server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pipewire-pluse</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> intel-media-driver</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>根据喜好安装WM，我这边安装的是KDE Plasma。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pacman</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sddm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> plasma-meta</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kde-applications</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>还有一些日常使用会用到的东西</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pacman</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> openssh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> zsh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fakeroot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> noto-fonts-cjk</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>安装输入法</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pacman</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fcitx5-im</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fcitx5-chinese-addons</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fcitx5-pinyin-moegirl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在<code>/etc/environment</code>中添加以下内容</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">XIM</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fcitx</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">GTK_IM_MODULE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fcitx</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">QT_IM_MODULE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fcitx</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">XMODIFIERS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">@</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">im</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fcitx</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">SDL_IM_MODULE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fcitx</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">GLFW_IM_MODULE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ibus</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">INPUT_METHOD</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fcitx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="设置时区" tabindex="-1"><a class="header-anchor" href="#设置时区"><span>设置时区</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ln</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -sf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/zoneinfo/Asia/Shanghai</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/localtime</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="设置语言" tabindex="-1"><a class="header-anchor" href="#设置语言"><span>设置语言</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/locale.gen</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 取消 en_US.UTF-8 UTF-8 和 zh_CN.UTF-8 UTF-8 的注释</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">locale-gen</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 生成语言环境</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">LANG=zh_CN.UTF-8</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/locale.conf</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置语言环境</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="网络配置" tabindex="-1"><a class="header-anchor" href="#网络配置"><span>网络配置</span></a></h3><ol><li><p>编辑<code>hostname</code>文件</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yourhostname</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/hostname</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置主机名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>编辑本地主机名文件<code>/etc/hosts</code></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/hosts</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在文件中加入以下内容：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">127.0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   localhost</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         localhost</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">127.0.1.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   yourhostname.localdomain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yourhostname</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="设置root密码" tabindex="-1"><a class="header-anchor" href="#设置root密码"><span>设置root密码</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">passwd</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置root密码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>配置用户</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">useradd</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -G</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wheel,audio,video,storage</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /bin/bash</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yourusername</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 创建用户</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">passwd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> yourusername</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 设置用户密码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>编辑sudoers文件，给用户sudo权限</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/sudoers</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在文件中找到<code>root ALL=(ALL:ALL) ALL</code>这一行，在下方添加<code>yourusername ALL=(ALL:ALL) ALL</code>，保存并退出。</p><h3 id="设置开机自启动项" tabindex="-1"><a class="header-anchor" href="#设置开机自启动项"><span>设置开机自启动项</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> NetworkManager</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 开机自启动网络管理器</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sddm</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 开机自启动显示管理器</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安装grub引导程序" tabindex="-1"><a class="header-anchor" href="#安装grub引导程序"><span>安装<code>grub</code>引导程序</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pacman</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> grub</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> efibootmgr</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 安装grub和efibootmgr</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">grub-install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --target=x86_64-efi</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --efi-directory=/boot</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --bootloader-id=GRUB</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 安装grub</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">grub-mkconfig</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /boot/grub/grub.cfg</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 生成grub配置文件</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_0x03-重启" tabindex="-1"><a class="header-anchor" href="#_0x03-重启"><span>0x03 重启</span></a></h2><p>至此，崭新的带有桌面环境的ArchLinux系统就安装完成了。</p><p>我们可以通过<code>exit</code>命令退出chroot环境，然后使用<code>umount -R /mnt</code>命令取消挂载分区， 最后使用<code>reboot</code>命令重启系统。（记得在启动进入BIOS之前拔出U盘！！！）</p><p>尽情玩耍吧！</p><h2 id="参考教程" tabindex="-1"><a class="header-anchor" href="#参考教程"><span>参考教程</span></a></h2><p><a href="https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97" target="_blank" rel="noopener noreferrer">ArchWiki#安装指南</a></p><p><a href="https://arch.icekylin.online/guide/rookie/basic-install" target="_blank" rel="noopener noreferrer">archlinux 基础安装</a></p><p><a href="https://www.bilibili.com/video/BV1DTT2zSE5R/" target="_blank" rel="noopener noreferrer">全盘加密安装Arch Linux的一切（困难模式）</a></p>`,60)),t(i,{src:"https://player.bilibili.com/player.html?bvid=BV1DTT2zSE5R&autoplay=0&high_quality=1",width:"100%",height:"400px",ratio:"16:9",title:"Bilibili",type:"bilibili"})])}const b=e(k,[["render",p]]),A=JSON.parse('{"path":"/OS/ArchLinux/setup/","title":"Archlinux安装小记","lang":"zh-CN","frontmatter":{"title":"Archlinux安装小记","createTime":"2024/11/29 11:53:00","permalink":"/OS/ArchLinux/setup/","description":"0xFF 前言 前前后后两天多，ArchLinux和一些常用软件的安装也算是基本完成了。 fastfetch 回想这次的安装过程，感觉ArchLinux的安装过程还是相对比较顺利的 （毕竟网上教程有好多， 跟着Wiki很多问题也能找到解决方案 ）。 在这边浅浅记录一下本次安装过程中碰到的亿些小问题，也方便今后巩固和回顾。 0x00 安装前的准备 物料准...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Archlinux安装小记\\",\\"image\\":[\\"https://blog.l0v3ch4n.top/images/notes/OS/ArchLinux/setup/fastfetch.jpg\\",\\"https://blog.l0v3ch4n.top/images/notes/OS/ArchLinux/setup/lsblk.png\\"],\\"dateModified\\":\\"2025-06-24T11:32:49.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://blog.l0v3ch4n.top/OS/ArchLinux/setup/"}],["meta",{"property":"og:site_name","content":"L0v3ch4n"}],["meta",{"property":"og:title","content":"Archlinux安装小记"}],["meta",{"property":"og:description","content":"0xFF 前言 前前后后两天多，ArchLinux和一些常用软件的安装也算是基本完成了。 fastfetch 回想这次的安装过程，感觉ArchLinux的安装过程还是相对比较顺利的 （毕竟网上教程有好多， 跟着Wiki很多问题也能找到解决方案 ）。 在这边浅浅记录一下本次安装过程中碰到的亿些小问题，也方便今后巩固和回顾。 0x00 安装前的准备 物料准..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://blog.l0v3ch4n.top/images/notes/OS/ArchLinux/setup/fastfetch.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-24T11:32:49.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-24T11:32:49.000Z"}]]},"readingTime":{"minutes":4.56,"words":1369},"git":{"createdTime":1732885746000,"updatedTime":1750764769000,"contributors":[{"name":"L0v3ch4n","username":"L0v3ch4n","email":"cuberwei0@163.com","commits":7,"avatar":"https://avatars.githubusercontent.com/L0v3ch4n?v=4","url":"https://github.com/L0v3ch4n"}]},"autoDesc":true,"filePathRelative":"notes/OS/ArchLinux/安装.md","headers":[]}');export{b as comp,A as data};
